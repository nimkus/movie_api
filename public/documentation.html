<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Documentation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        background-color: #f4f4f4;
        padding: 20px;
      }
      h1,
      h2,
      h3 {
        color: #333;
      }
      .blue-text {
        color: blue;
      }
      code {
        background-color: #eaeaea;
        padding: 2px 4px;
        font-size: 0.9em;
        color: #333;
      }
      pre {
        background-color: #eaeaea;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
      }
      .table-container {
        background-color: #fff;
        padding: 20px;
        margin: 20px 0;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        text-align: left;
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #ddd;
      }
      /* Section Dividers */
      tr.section-header {
        background-color: #f4f4f4;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>Movie API Documentation</h1>
    <p>
      Welcome to the documentation for the MyFlix-Movie API. This web application provides users with access to
      information about movies, directors, and genres. Users can also sign up, log in, update their information, and
      create a list of favorite movies.
    </p>

    <h2>Table of Contents</h2>
    <ul>
      <li><a href="#app-setup">App Setup</a></li>
      <li><a href="#installation">Installation</a></li>

      <li><a href="#endpoints">Endpoints</a></li>
      <li><a href="#authentication">Authentication</a></li>
      <li><a href="#dependencies">Dependencies</a></li>
      <!-- Link to dependencies section -->
    </ul>

    <h2 id="app-setup">App Setup</h2>
    <p>
      The app uses Express, MongoDB, and various middleware for functionality such as body parsing, authentication,
      logging, and CORS.
    </p>

    <h2 id="installation">Installation</h2>
    <p>To install and run the MyFlix-Movie API, follow these steps:</p>
    <ol>
      <li>Clone the repository:</li>
      <pre><code>git clone https://github.com/yourusername/MyFlix-Movie-API.git</code></pre>
      <li>Navigate to the project directory:</li>
      <pre><code>cd MyFlix-Movie-API</code></pre>
      <li>Install the required dependencies:</li>
      <pre><code>npm install</code></pre>
      <li>Start the server:</li>
      <pre><code>npm start</code></pre>
      <li>Open your browser and go to <code>http://localhost:YOUR_PORT</code> to access the API.</li>
    </ol>

    <h2 id="endpoints">Endpoints</h2>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>METHOD</th>
            <th>ENDPOINTS</th>
            <th>REQUEST PAYLOAD (EXAMPLE)</th>
            <th>RESPONSE SAMPLE</th>
          </tr>
        </thead>
        <tbody>
          <!-- Login Section Header -->
          <tr class="section-header">
            <td colspan="4">Login Endpoints</td>
          </tr>
          <tr>
            <td>POST</td>
            <td>/login<br />Allows users to log in and receive a JWT for further authentication.</td>
            <td>
              <pre><code>{
      "username": "johnDoe",
      "password": "Password123!"
    }</code></pre>
            </td>
            <td>
              <pre><code>{
      "token": "your_jwt_token"
    }</code></pre>
            </td>
          </tr>

          <!-- Movies Section Header -->
          <tr class="section-header">
            <td colspan="4">Movie Endpoints</td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies<br />Returns a list of all movies.</td>
            <td>N/A</td>
            <td>
              <pre><code>[
      {
        "title": "Inception",
        "director": "Christopher Nolan",
        "genre": "Sci-Fi"
      },
      {
        "title": "Interstellar",
        "director": "Christopher Nolan",
        "genre": "Sci-Fi"
      }
    ]</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/:title<br />Returns a specific movie by title.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "title": "Inception",
      "director": "Christopher Nolan",
      "genre": "Sci-Fi"
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/directors/all<br />Returns a list of all directors.</td>
            <td>N/A</td>
            <td>
              <pre><code>[
      "Christopher Nolan",
      "Quentin Tarantino",
      "Steven Spielberg"
    ]</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/directors/:name<br />Returns a specific director by name.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "name": "Christopher Nolan",
      "movies": ["Inception", "Interstellar", "The Dark Knight"]
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/genres/all<br />Returns a list of all genres.</td>
            <td>N/A</td>
            <td>
              <pre><code>[
      "Sci-Fi",
      "Action",
      "Drama"
    ]</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/genres/:name<br />Returns a specific genre by name.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "name": "Sci-Fi",
      "movies": ["Inception", "Interstellar"]
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/actors/all<br />Returns a list of all actors.</td>
            <td>N/A</td>
            <td>
              <pre><code>[
      "Leonardo DiCaprio",
      "Brad Pitt",
      "Matt Damon"
    ]</code></pre>
            </td>
          </tr>
          <tr>
            <td>GET</td>
            <td>/movies/actors/:name<br />Returns a specific actor by name.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "name": "Leonardo DiCaprio",
      "movies": ["Inception", "The Revenant"]
    }</code></pre>
            </td>
          </tr>

          <!-- Users Section Header -->
          <tr class="section-header">
            <td colspan="4">User Endpoints</td>
          </tr>
          <tr>
            <td>POST</td>
            <td>/users<br />Register a new user.</td>
            <td>
              <pre><code>{
      "username": "newUser",
      "password": "Password123!",
      "email": "newuser@example.com",
      "birthday": "1990-01-01"
    }</code></pre>
            </td>
            <td>
              <pre><code>{
      "message": "User successfully registered",
      "user": {
        "username": "newUser",
        "email": "newuser@example.com"
      }
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>PUT</td>
            <td>/users/:username<br />Update user details.</td>
            <td>
              <pre><code>{
      "username": "updatedUser",
      "email": "updateduser@example.com",
      "birthday": "1991-02-01"
    }</code></pre>
            </td>
            <td>
              <pre><code>{
      "message": "User details updated",
      "user": {
        "username": "updatedUser",
        "email": "updateduser@example.com"
      }
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>DELETE</td>
            <td>/users/:username<br />Delete a user account.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "message": "User successfully deleted"
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>PUT</td>
            <td>/users/:username/:movieId<br />Add a favorite movie to a user.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "message": "Movie added to favorites"
    }</code></pre>
            </td>
          </tr>
          <tr>
            <td>DELETE</td>
            <td>/users/:username/:movieId<br />Remove a favorite movie from a user.</td>
            <td>N/A</td>
            <td>
              <pre><code>{
      "message": "Movie removed from favorites"
    }</code></pre>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <h2 id="authentication">Authentication</h2>
    <p>
      The app uses JWT authentication. Users must log in to receive a token, which is then included in the
      <code>Authorization</code> header of all requests as a Bearer token.
    </p>
    <p>
      For added security, user passwords are hashed before being stored in the database using a strong hashing algorithm
      (such as bcrypt). This ensures that even if the database were compromised, plaintext passwords would not be
      exposed.
    </p>

    <h3>JWT Example</h3>
    <pre><code>Authorization: Bearer YOUR_TOKEN_HERE</code></pre>

    <h3>Passport Strategy</h3>
    <p>
      Passport.js is used for handling the authentication logic, leveraging local strategies for username/password
      authentication and JWT strategies for protecting routes.
    </p>

    <h2 id="dependencies">Dependencies</h2>
    <p>The following dependencies are required for the application to function properly:</p>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Dependency</th>
            <th>Version</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>bcrypt</td>
            <td>^5.1.1</td>
          </tr>
          <tr>
            <td>body-parser</td>
            <td>^1.20.2</td>
          </tr>
          <tr>
            <td>cors</td>
            <td>^2.8.5</td>
          </tr>
          <tr>
            <td>express</td>
            <td>^4.19.2</td>
          </tr>
          <tr>
            <td>express-validator</td>
            <td>^7.2.0</td>
          </tr>
          <tr>
            <td>jsonwebtoken</td>
            <td>^9.0.2</td>
          </tr>
          <tr>
            <td>method-override</td>
            <td>^3.0.0</td>
          </tr>
          <tr>
            <td>mongoose</td>
            <td>^8.5.1</td>
          </tr>
          <tr>
            <td>morgan</td>
            <td>^1.10.0</td>
          </tr>
          <tr>
            <td>passport</td>
            <td>^0.7.0</td>
          </tr>
          <tr>
            <td>passport-jwt</td>
            <td>^4.0.1</td>
          </tr>
          <tr>
            <td>passport-local</td>
            <td>^1.0.0</td>
          </tr>
          <tr>
            <td>uuid</td>
            <td>^10.0.0</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
